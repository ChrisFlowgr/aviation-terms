{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://flightmanager.app/schemas/batch.schema.json",
  "title": "Flight Manager Glossary Term Batch",
  "description": "Schema for validating batches of glossary terms for the Flight Manager app",
  "type": "object",
  "required": ["terms"],
  "properties": {
    "terms": {
      "type": "array",
      "description": "Array of glossary terms",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/GlossaryTerm"
      }
    }
  },
  "definitions": {
    "GlossaryTerm": {
      "type": "object",
      "required": [
        "id",
        "title",
        "category",
        "sections",
        "synonyms",
        "tags",
        "relationships",
        "createdAt",
        "updatedAt"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier in kebab-case format",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "minLength": 1,
          "maxLength": 100,
          "examples": [
            "flight-level",
            "instrument-landing-system",
            "pack-control-selectors"
          ]
        },
        "title": {
          "type": "string",
          "description": "Display name of the term",
          "minLength": 1,
          "maxLength": 200,
          "examples": [
            "Flight Level",
            "ILS - Instrument Landing System",
            "Pack Control Selectors (PACK 1, 2, 3)"
          ]
        },
        "category": {
          "type": "string",
          "description": "Category the term belongs to (must match exactly)",
          "enum": [
            "Navigation",
            "Weather",
            "Communication",
            "Safety",
            "Performance",
            "Flight Controls",
            "Navigation Systems",
            "Equipment",
            "Procedures",
            "Electrical Systems",
            "Electrical",
            "Pneumatic Systems",
            "Environmental Systems",
            "Ice Protection Systems",
            "Cargo Systems",
            "Hydraulic Systems",
            "Communication Systems",
            "Lighting Systems",
            "Cabin Systems",
            "Fire Protection Systems",
            "Flight Instruments",
            "Engine Systems",
            "System Controls",
            "Safety Equipment",
            "Communications",
            "Landing Gear"
          ]
        },
        "sections": {
          "type": "object",
          "description": "Content sections for the term",
          "required": ["whatItIs"],
          "properties": {
            "whatItIs": {
              "$ref": "#/definitions/GlossarySection",
              "description": "REQUIRED - Primary definition"
            },
            "location": {
              "$ref": "#/definitions/GlossarySection",
              "description": "OPTIONAL - Physical location in aircraft"
            },
            "howItWorks": {
              "$ref": "#/definitions/GlossarySection",
              "description": "OPTIONAL - Functional explanation"
            },
            "whatYouShouldDo": {
              "$ref": "#/definitions/GlossarySection",
              "description": "OPTIONAL - Operational procedures"
            },
            "troubleshooting": {
              "$ref": "#/definitions/GlossarySection",
              "description": "OPTIONAL - Problem-solving guide"
            }
          },
          "additionalProperties": false
        },
        "synonyms": {
          "type": "array",
          "description": "Alternative names and abbreviations (can be empty)",
          "items": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "uniqueItems": true,
          "examples": [
            ["FL", "Altitude Level", "Pressure Altitude"],
            ["ILS", "Precision Approach", "Localizer/Glideslope"]
          ]
        },
        "tags": {
          "type": "array",
          "description": "Searchable tags (can be empty)",
          "items": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$"
          },
          "uniqueItems": true,
          "examples": [
            ["altitude", "navigation", "safety"],
            ["landing", "instruments", "precision", "approach"]
          ]
        },
        "relationships": {
          "type": "array",
          "description": "Related terms (can be empty)",
          "items": {
            "$ref": "#/definitions/SemanticRelationship"
          }
        },
        "createdAt": {
          "type": "string",
          "description": "ISO 8601 timestamp",
          "format": "date-time",
          "examples": ["2024-01-01T00:00:00Z", "2025-01-15T12:30:00Z"]
        },
        "updatedAt": {
          "type": "string",
          "description": "ISO 8601 timestamp",
          "format": "date-time",
          "examples": ["2024-01-01T00:00:00Z", "2025-01-15T12:30:00Z"]
        }
      },
      "additionalProperties": false
    },
    "GlossarySection": {
      "type": "object",
      "required": ["content"],
      "properties": {
        "content": {
          "type": "string",
          "description": "Plain text content (NO MARKDOWN). Recommended 100-500 characters.",
          "minLength": 10,
          "maxLength": 2000
        }
      },
      "additionalProperties": false
    },
    "SemanticRelationship": {
      "type": "object",
      "required": ["termId", "type"],
      "properties": {
        "termId": {
          "type": "string",
          "description": "ID of related term (must exist in glossary)",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "examples": ["gps-irs-switch", "landing-lights-switches"]
        },
        "type": {
          "type": "string",
          "description": "Type of relationship",
          "enum": ["broader", "narrower", "related", "seeAlso"]
        },
        "description": {
          "type": "string",
          "description": "Optional explanation of the relationship",
          "minLength": 10,
          "maxLength": 500
        }
      },
      "additionalProperties": false
    }
  }
}
